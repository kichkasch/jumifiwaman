<script type="text/javascript">
    $(document).ready(function() {
        $("#accordionDevices").accordion({
            autoHeight: false,
            collapsible: true,
            active: false,
        });        
        $("#accordionFirmware").accordion({
            autoHeight: false,
            collapsible: true,
            active: false,
        });        

        var myDevTable;
        $("#myDevicesTable tbody").click(function(event) {
            $(myDevTable.fnSettings().aoData).each(function (){
                $(this.nTr).removeClass('row_selected');
            });
            $(event.target.parentNode).addClass('row_selected');
        });
        $('#deleteDevRow').click( function() {
            var anSelected = fnGetSelected( myDevTable);
            myDevTable.fnDeleteRow( anSelected[0] );    
        } );
        myDevTable = $('#myDevicesTable').dataTable( {
            "sPaginationType": "full_numbers",
            "bJQueryUI": true,
        });
        
        $('#devicesTable').dataTable( {
            "sPaginationType": "full_numbers",
            "bJQueryUI": true,
        });

        $('#deviceGroupsTable').dataTable( {
            "sPaginationType": "full_numbers",
            "bJQueryUI": true,
        });

        $('#manufactorersTable').dataTable( {
            "sPaginationType": "full_numbers",
            "bJQueryUI": true,
        });
        
        var myFirmwareTable;
        $("#firmwareTable tbody").click(function(event) {
            $(myFirmwareTable.fnSettings().aoData).each(function (){
                $(this.nTr).removeClass('row_selected');
            });
            $(event.target.parentNode).addClass('row_selected');
        });
          $("#fwGroupDetails").click(function() {
            var anSelected1 = fnGetSelected(myFirmwareTable);
            var nTds = $('td', anSelected1);
            $.get("/details/fwGroupByName", {name: $(nTds[0]).text()}, function(data){
                var vals = data.split("\n");
                $("#fwDetailsName").text(vals[0]);
                $("#fwDetailsHP").text(vals[1]);
                $("#fwDetailsNotes").text(vals[2]);
                $("#fwDetailsStatus").text(vals[3]);
                $("#fwDetailsSource").text(vals[4]);
            }); 
            /*$("#fwDetailsName").text($(nTds[0]).text());*/
            $("#dialog-fwDetails").dialog({
                width: 400,
                modal: true,
                draggable: false ,
                closeText: 'show',
                autoOpen: true,
                buttons: { "Close": function() { $(this).dialog("close"); } },
            });
          });          
        myFirmwareTable = $('#firmwareTable').dataTable( {
            "sPaginationType": "full_numbers",
            "bJQueryUI": true,
        });

        $('#fwSourcesGroupsTable').dataTable( {
            "sPaginationType": "full_numbers",
            "bJQueryUI": true,
        });

        $('#fwStatusTable').dataTable( {
            "sPaginationType": "full_numbers",
            "bJQueryUI": true,
        });
        
    } );
    
	$(function() {
          $("#buttonHelp").click(function() {
            $("#dialog-help").dialog({
                width: 800,
                modal: true,
                draggable: false ,
                closeText: 'show',
                autoOpen: true,
                buttons: { "Close": function() { $(this).dialog("close"); } },
            });
          });
                
        $("#buttonDetailToggler").click(function() {
            $("#deviceDetailToggler").toggle("blind",{},500);
            return false;
        });
        
        $("#buttonDetailManToggler").click(function() {
            $("#manDetailToggler").toggle("blind",{},500);
            return false;
        });
                
        $('#buttonMan').click(function() {
            $('#dialogMan').dialog({
                autoOpen: true,
                width: 350,
                modal: true,
                draggable: false ,
                buttons: {
                    'Create this Manufacturer': function() {
                        $('#manufactorersTable').dataTable().fnAddData( [$("#manName").val(),$("#manWebsite").val() ] );
                        $('#devManName').append("<option>" + $("#manName").val() + "</option>");
                        $.post("/newManufactorer",{ 
                            manName: $("#manName").val(), manWebsite: $("#manWebsite").val()});
                        $(this).dialog('close');
                    },
                    Cancel: function() {
                        $(this).dialog('close');
                    }
                },
                close: function() {
                    allFields.val('').removeClass('ui-state-error');
                }
            });
        });

        $('#buttonDeviceGroup').click(function() {
            $('#dialogDevGroup').dialog({
                autoOpen: true,
                width: 350,
                modal: true,
                draggable: false ,
                buttons: {
                    'Create this Device Group': function() {
                        $('#deviceGroupsTable').dataTable().fnAddData( [$("#groupName").val()] );
                        $('#devDevGroup').append("<option>" + $("#groupName").val() + "</option>");
                        $.post("/newDeviceGroup",{ groupName: $("#groupName").val()});
                        $(this).dialog('close');
                    },
                    Cancel: function() {
                        $(this).dialog('close');
                    }
                },
                close: function() {
                    allFields.val('').removeClass('ui-state-error');
                }
            });
        });
   
        $('#buttonDevice').click(function() {
            $('#dialogDevice').dialog({
                autoOpen: true,
                width: 350,
                modal: true,
                draggable: false ,
                buttons: {
                    'Create this Device': function() {
                        $('#devicesTable').dataTable().fnAddData( [$("#deviceId").val(),$("#deviceName").val(),$("#devDevGroup").val(),$("#devManName").val()] );
                        $.post("/newDevice", {
                            deviceName: $("#deviceName").val(), 
                            deviceID: $("#deviceId").val(), 
                            deviceGroup:$("#devDevGroup").val(),
                            manufactorer:$("#devManName").val() });
                        $(this).dialog('close');
                    },
                    Cancel: function() {
                        $(this).dialog('close');
                    }
                },
                close: function() {
                    allFields.val('').removeClass('ui-state-error');
                }
            });
        });
        
        $('#fwGroupAdd').click(function() {
            $('#dialogFWGroup').dialog({
                autoOpen: true,
                width: 350,
                modal: true,
                draggable: false ,
                buttons: {
                    'Create this Firmware Group': function() {
                        $('#firmwareTable').dataTable().fnAddData( [$("#fwGroupName").val(),$("#fwSource").val(),$("#fwStatus").val()  ,"","",""] );
                        $.post("/newFirmwareGroup", {
                            fwGroupName: $("#fwGroupName").val(), 
                            fwGroupHomepage:$("#fwGroupHomepage").val(), 
                            fwGroupNotes: $("#fwGroupNotes").val(), 
                            fwGroupStatus: $("#fwStatus").val(), 
                            fwGroupSource:$("#fwSource").val()
                            });
                        $(this).dialog('close');
                    },
                    Cancel: function() {
                        $(this).dialog('close');
                    }
                },
                close: function() {
                    allFields.val('').removeClass('ui-state-error');
                }
            });
        });        
        
        $('#buttonFWSourceGroup').click(function() {
            $('#dialogFWSourceGroup').dialog({
                autoOpen: true,
                width: 350,
                modal: true,
                draggable: false ,
                buttons: {
                    'Create this Firmware Source Group': function() {
                        $('#fwSourcesGroupsTable').dataTable().fnAddData( [$("#fwSourceGroupName").val()] );
                        $('#fwSource').append("<option>" + $("#fwSourceGroupName").val() + "</option>");
                        $.post("/newFirmwareSource",{ fwSourceName: $("#fwSourceGroupName").val()});
                        $(this).dialog('close');
                    },
                    Cancel: function() {
                        $(this).dialog('close');
                    }
                },
                close: function() {
                    allFields.val('').removeClass('ui-state-error');
                }
            });
        });        

        $('#buttonFWStatus').click(function() {
            $('#dialogFWStatus').dialog({
                autoOpen: true,
                width: 350,
                modal: true,
                draggable: false ,
                buttons: {
                    'Create this Development Status': function() {
                        $('#fwStatusTable').dataTable().fnAddData( [$("#fwStatusName").val()] );
                        $('#fwStatus').append("<option>" + $("#fwStatusName").val() + "</option>");                        
                        $.post("/newFirmwareStatus",{ fwStatusName: $("#fwStatusName").val()});
                        $(this).dialog('close');
                    },
                    Cancel: function() {
                        $(this).dialog('close');
                    }
                },
                close: function() {
                    allFields.val('').removeClass('ui-state-error');
                }
            });
        });        
        
        
    });

    $('#dialog-help').hide();
    $('#date').datepicker();    
    $("#dialog-help").dialog("destroy");
    $("#deviceDetailToggler").hide();
    $("#manDetailToggler").hide();
    $("#dialogMan").hide();
    $("#dialogDevGroup").hide();
    $("#dialogDevice").hide();
    $('#dialogFWSourceGroup').hide();
    $('#dialogFWStatus').hide();
    $('#dialogFWGroup').hide();
    $("#dialog-fwDetails").hide();

    $("#tabs").tabs();

	</script>

